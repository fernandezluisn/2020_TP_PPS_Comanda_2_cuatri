{"version":3,"sources":["webpack:///./src/app/paginas/hacer-pedido/hacer-pedido.module.ts","webpack:///./src/app/paginas/hacer-pedido/hacer-pedido.page.html","webpack:///./src/app/paginas/hacer-pedido/hacer-pedido.page.scss","webpack:///./src/app/paginas/hacer-pedido/hacer-pedido.page.ts"],"names":[],"mappings":"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","file":"paginas-hacer-pedido-hacer-pedido-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { HacerPedidoPage } from './hacer-pedido.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: HacerPedidoPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [HacerPedidoPage]\r\n})\r\nexport class HacerPedidoPageModule {}\r\n","module.exports = \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-title>Hacer Pedido</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ng-container *ngIf=\\\"esMozo\\\">\\r\\n    <ion-item><ion-label>Seleccione Nro de Mesa:</ion-label></ion-item>\\r\\n    <ion-select [(ngModel)]=\\\"pedido['id_mesa_cliente']\\\" placeholder=\\\"Seleccione Nro Mesa\\\">\\r\\n      <ng-container *ngFor=\\\"let m of mesasClientes\\\">\\r\\n        <ion-select-option value=\\\"{{m.id}}\\\" *ngIf=\\\"!m.cerrada\\\">{{m.idMesa}}</ion-select-option>\\r\\n      </ng-container>\\r\\n    </ion-select>\\r\\n  </ng-container>  \\r\\n  <ng-container *ngIf=\\\"pedidosProductos.length > 0\\\">\\r\\n    <ion-item><ion-label>Pedido Actual:</ion-label></ion-item>\\r\\n    <table style=\\\"width: 100%; border: 2px solid red; text-align: center;\\\">\\r\\n      <thead><th>Producto</th><th>Precio</th> <th>Cantidad</th> <th>Borrar</th></thead>\\r\\n      <tbody>\\r\\n        <ng-container *ngFor=\\\"let prod of pedidosProductos\\\">\\r\\n          <tr>\\r\\n            <ng-container *ngFor=\\\"let p of productos\\\">\\r\\n              <ng-container *ngIf=\\\"p.id == prod.id_producto\\\">\\r\\n                <td>{{p.nombre}}</td>\\r\\n                <td>{{p.precio}}</td>\\r\\n                <td>{{prod.cantidad}}</td>\\r\\n              </ng-container>              \\r\\n            </ng-container>     \\r\\n            <td><ion-button color=\\\"danger\\\" (click)=\\\"BorrarProducto(prod.id_producto)\\\" shape=\\\"round\\\">X</ion-button></td>       \\r\\n          </tr>\\r\\n        </ng-container>        \\r\\n      </tbody>\\r\\n    </table>\\r\\n  </ng-container>  \\r\\n  <ion-list *ngFor=\\\"let item of productos\\\">\\r\\n    <div style=\\\"width:100%;\\\">\\r\\n      <ion-item><h2>{{item.nombre}}</h2></ion-item>\\r\\n      <ion-item>{{item.descripcion}}</ion-item>\\r\\n      <div style=\\\"height: 100px; text-align: center;\\\">\\r\\n        <img src=\\\"{{item.foto_1}}\\\" style=\\\"width: 30%; height: 100%;\\\">\\r\\n        <img src=\\\"{{item.foto_2}}\\\" style=\\\"width: 30%; height: 100%;\\\">\\r\\n        <img src=\\\"{{item.foto_3}}\\\" style=\\\"width: 30%; height: 100%;\\\">\\r\\n      </div>\\r\\n      <br>\\r\\n      <ion-item>Precio: ${{item.precio}}.00</ion-item>\\r\\n      <ion-item>\\r\\n          Cantidad: &nbsp;<input type=\\\"number\\\" min=\\\"1\\\" [(ngModel)]=\\\"cantidad\\\" style=\\\"width: 30px;\\\">\\r\\n        <ion-button color=\\\"danger\\\" (click)=\\\"Agregar(item.id)\\\" slot=\\\"end\\\">Agregar a Pedido</ion-button>\\r\\n      </ion-item>\\r\\n    </div>\\r\\n  </ion-list>\\r\\n</ion-content>\\r\\n<ion-footer>\\r\\n  <ion-button (click)=\\\"LeerQR()\\\" color='dark' expand=\\\"full\\\">Seleccionar por QR</ion-button>\\r\\n  <ion-button (click)=\\\"TerminarPedido()\\\" color='dark' expand=\\\"full\\\">Terminar Pedido</ion-button>\\r\\n</ion-footer>\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2luYXMvaGFjZXItcGVkaWRvL2hhY2VyLXBlZGlkby5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\r\nimport { ProductosService } from 'src/app/servicios/productos.service';\r\nimport { Producto } from 'src/app/interfaces/producto';\r\nimport { Pedido } from 'src/app/interfaces/pedido';\r\nimport { PedidoProducto } from 'src/app/interfaces/pedido';\r\nimport { PedidosService } from 'src/app/servicios/pedidos.service';\r\nimport { MesasService } from 'src/app/servicios/mesas.service';\r\nimport { AuthService } from 'src/app/servicios/auth.service';\r\nimport { Router } from '@angular/router';\r\nimport { BarcodeScanner } from '@ionic-native/barcode-scanner/ngx';\r\nimport { AlertService } from 'src/app/servicios/alert.service';\r\nimport { AlertController } from '@ionic/angular';\r\nimport { SpinerService } from 'src/app/servicios/spiner.service';\r\n\r\n@Component({\r\n  selector: 'app-hacer-pedido',\r\n  templateUrl: './hacer-pedido.page.html',\r\n  styleUrls: ['./hacer-pedido.page.scss'],\r\n})\r\nexport class HacerPedidoPage implements OnInit {\r\n  public productos: Producto[];\r\n  public cantidad: number;\r\n  direccion:any=false;\r\n  public pedido = {\r\n    comienzo: (new Date()).toString(),\r\n    estado: 'sconfirmar',\r\n    id_mesa_cliente: '',\r\n    'id-mesa': '',\r\n    delivery:false,\r\n    direccion:'',\r\n    foto:'',\r\n    email:''\r\n  };\r\n  public pedidosProductos = [];\r\n  public mesasClientes = [];\r\n  private idUsusario = '';\r\n  private usuario;\r\n  public esMozo: boolean;\r\n  esCliente:boolean;\r\n  constructor(private prodServ: ProductosService, private pedidoServ: PedidosService,\r\n    private mesaServ: MesasService, private authServ: AuthService,\r\n    private router: Router, private barcodeScanner: BarcodeScanner, \r\n    private alertServ: AlertService,\r\n    private alertController: AlertController,private spiner:SpinerService) {\r\n    this.prodServ.devolverListadoProductos().subscribe( (data) => {\r\n      this.productos = data;\r\n      // console.log(data);\r\n    });\r\n    this.cantidad = 1;\r\n  }\r\n  async ngOnInit() {\r\n    let sp = await this.spiner.GetAllPageSpinner(\"\");\r\n    sp.present();\r\n    this.idUsusario = this.authServ.getUsuario()['id'];\r\n    this.usuario = this.authServ.getUsuario();\r\n    this.pedido.foto = this.usuario['foto'];\r\n    this.pedido.email = this.usuario['mail'];\r\n    this.mesaServ.getMesas().subscribe( (data) => {\r\n      this.mesasClientes = data;\r\n      if (this.usuario.perfil != 'cliente' && this.usuario.perfil != 'anonimo') {\r\n        this.esMozo = true;\r\n      } else {\r\n        this.esMozo = false;\r\n        this.esCliente = this.usuario.perfil == 'cliente';\r\n\r\n        for (const item of this.mesasClientes) {\r\n          if (item.idCliente === this.idUsusario && !item.cerrada) {\r\n            this.pedido.id_mesa_cliente = item.id;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    sp.dismiss();\r\n\r\n    });\r\n  }\r\n\r\n  public Agregar(idProd: string) {\r\n    console.log(idProd);\r\n    if (this.cantidad > 0 ) {\r\n        const pedidoProd = {\r\n          id_pedido: this.pedido['id'],\r\n          estado: 'sconfirmar',\r\n          id_producto: idProd,\r\n          id_comanda: '',\r\n          cantidad: this.cantidad\r\n        };\r\n        this.pedidosProductos.push(pedidoProd);\r\n        this.alertServ.mensaje(''+this.cantidad+' productos','agregados')\r\n    }\r\n    console.log(this.pedidosProductos)\r\n    this.cantidad = 1;\r\n  }\r\n\r\n  public async TerminarPedido(delivery:boolean=false) {\r\n    let sp = await this.spiner.GetAllPageSpinner(\"\");\r\n    sp.present();\r\n\r\n    if(!delivery){\r\n      this.direccion = false;\r\n    }\r\n    if(this.esCliente && this.pedido.id_mesa_cliente == '' && !delivery){\r\n      sp.dismiss();\r\n\r\n      const alert = await this.alertController.create({\r\n        header: 'Usted no tiene mesa',\r\n        message:' Desea hacer un delivery?',\r\n        inputs: [\r\n          {\r\n            name: 'direccion',\r\n            type: 'text',\r\n            placeholder: 'Direccion del pedido'\r\n          }\r\n        ],\r\n        translucent: true,\r\n        buttons: [\r\n          {\r\n            text: 'Cancelar',\r\n            role: 'cancel',\r\n            cssClass: 'secondary',\r\n            handler: () => {\r\n              this.alertServ.mensaje('','No se hara el delivery')\r\n            }\r\n          }, {\r\n            text: 'Aceptar',\r\n            handler: (data) => {\r\n              this.pedido.direccion = data['direccion'];\r\n              this.pedido.delivery = true;\r\n              this.pedido.id_mesa_cliente = this.usuario['id'];\r\n\r\n              this.TerminarPedido(data['direccion'])\r\n            }\r\n          }\r\n        ]\r\n      });\r\n      return alert.present();\r\n    }\r\n    if (this.pedidosProductos.length > 0) {\r\n      // console.log(this.pedido.id_mesa_cliente);\r\n      if ((!this.esMozo && this.pedido.direccion && this.pedido.delivery) || this.pedido.id_mesa_cliente != '' ) {\r\n        this.mesasClientes.forEach(mCliente => {\r\n          if (mCliente.id == this.pedido.id_mesa_cliente) {\r\n            this.pedido['id-mesa'] = mCliente.idMesa;\r\n\r\n            // By Eze\r\n            this.mesaServ.getMesaPorID(mCliente.idMesa).then(mesas => {\r\n              mesas[0].estado = 'esperando pedido';\r\n              this.mesaServ.actualizarMesa(mesas[0]);\r\n            });\r\n          }\r\n        });\r\n        this.pedidoServ.AddPedido(this.pedido).then( (res) => {\r\n          this.pedido['id'] = res['id'];\r\n          // console.log(this.pedido);\r\n          for (const item of this.pedidosProductos) {\r\n            item.id_pedido = res['id'];\r\n            this.pedidoServ.AddPedidoProducto(item).then( (res) => {\r\n              console.log('agregado');\r\n            });\r\n          }\r\n          this.alertServ.mensaje('', 'El pedido se agregÃ³ correctamente');\r\n          if ( this.usuario.perfil == 'cliente' || this.usuario.perfil == 'anonimo') {\r\n            this.router.navigate(['/home-cliente']);\r\n          } else {\r\n            this.router.navigate(['/mozo-aceptar']);\r\n          }\r\n        });\r\n      } else {\r\n        this.alertServ.mensaje('Alerta:', 'Faltan datos para generar el pedido');\r\n      }\r\n    }\r\n    sp.dismiss();\r\n\r\n  }\r\n  public BorrarProducto(idProducto: string) {\r\n    console.log(this.pedidosProductos);\r\n    for (const pp of this.pedidosProductos) {\r\n      if (pp.id_producto == idProducto) {\r\n        const index = this.pedidosProductos.indexOf(pp);\r\n        this.pedidosProductos.splice(index, 1);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  public LeerQR() {\r\n    //MICA agrega lo de poner la cantidad\r\n    this.barcodeScanner.scan().then(resultado => {\r\n      this.productos.forEach(producto => {\r\n        if (producto.qr == resultado.text) {\r\n          this.Agregar(producto.id);\r\n        }\r\n      });\r\n    });\r\n  }\r\n}\r\n"],"sourceRoot":""}