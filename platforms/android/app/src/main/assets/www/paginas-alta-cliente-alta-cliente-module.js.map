{"version":3,"sources":["webpack:///./src/app/paginas/alta-cliente/alta-cliente.module.ts","webpack:///./src/app/paginas/alta-cliente/alta-cliente.page.html","webpack:///./src/app/paginas/alta-cliente/alta-cliente.page.scss","webpack:///./src/app/paginas/alta-cliente/alta-cliente.page.ts","webpack:///./src/app/servicios/spinner.service.ts"],"names":[],"mappings":"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","file":"paginas-alta-cliente-alta-cliente-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { AltaClientePage } from './alta-cliente.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AltaClientePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [AltaClientePage]\r\n})\r\nexport class AltaClientePageModule {}\r\n","module.exports = \"<ion-header>\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-title>Registro</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ion-item>\\r\\n    <ion-label position=\\\"floating\\\">Tipo de usuario</ion-label>\\r\\n    <ion-select [(ngModel)]=\\\"this.tipoRegistro\\\">\\r\\n      <ion-select-option>Usuario</ion-select-option>\\r\\n      <ion-select-option>Anónimo</ion-select-option>\\r\\n    </ion-select>\\r\\n  </ion-item>\\r\\n\\r\\n  <ion-item>\\r\\n    <ion-label position=\\\"floating\\\">Nombre</ion-label>\\r\\n    <ion-input type=\\\"text\\\" [(ngModel)]=\\\"this.nombreUsuario\\\"></ion-input>\\r\\n  </ion-item>\\r\\n\\r\\n  <ng-container *ngIf=\\\"this.tipoRegistro == 'Usuario'\\\">\\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"floating\\\">Apellido</ion-label>\\r\\n      <ion-input type=\\\"text\\\" [(ngModel)]=\\\"this.apellidoUsuario\\\"></ion-input>\\r\\n    </ion-item>\\r\\n  \\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"floating\\\">DNI</ion-label>\\r\\n      <ion-input type=\\\"number\\\" [(ngModel)]=\\\"this.dniUsuario\\\"></ion-input>\\r\\n    </ion-item>\\r\\n  \\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"floating\\\">Correo</ion-label>\\r\\n      <ion-input type=\\\"email\\\" [(ngModel)]=\\\"this.correoUsuario\\\"></ion-input>\\r\\n    </ion-item>\\r\\n  \\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"floating\\\">Clave</ion-label>\\r\\n      <ion-input type=\\\"password\\\" [(ngModel)]=\\\"this.claveUsuario\\\"></ion-input>\\r\\n    </ion-item>\\r\\n  </ng-container>\\r\\n\\r\\n\\r\\n  <ion-item lines=\\\"full\\\">\\r\\n    <ion-label>Imagen: </ion-label>\\r\\n    <ion-label *ngIf=\\\"this.urlFotoUsuario != ''\\\">\\r\\n      <ion-thumbnail>\\r\\n        <ion-img [src]=\\\"this.urlFotoUsuario\\\"></ion-img>\\r\\n      </ion-thumbnail>\\r\\n    </ion-label>\\r\\n    <ion-label *ngIf=\\\"this.urlFotoUsuario == ''\\\"></ion-label>\\r\\n  </ion-item>\\r\\n\\r\\n  <ion-button (click)=\\\"this.tomarDatosDNI()\\\" expand=\\\"full\\\" color=\\\"primary\\\">Escanear DNI</ion-button>\\r\\n  <ion-button (click)=\\\"this.tomarFotoUsuario()\\\" expand=\\\"full\\\" color=\\\"warning\\\">Cargar foto</ion-button>\\r\\n  <ng-container *ngIf=\\\"this.tipoRegistro == 'Usuario'\\\">\\r\\n    <ion-button (click)=\\\"this.cargarUsuario()\\\" expand=\\\"full\\\" color=\\\"success\\\">Registrar usuario</ion-button>\\r\\n  </ng-container>\\r\\n  <ng-container *ngIf=\\\"this.tipoRegistro == 'Anónimo'\\\">\\r\\n    <ion-button (click)=\\\"this.cargarUsuario()\\\" expand=\\\"full\\\" color=\\\"primary\\\">Ingresar como anónimo</ion-button>\\r\\n  </ng-container>\\r\\n\\r\\n  <ion-button class=\\\"apagar\\\" color=\\\"dark\\\" (click)=\\\"salir()\\\">\\r\\n    <ion-icon name=\\\"power\\\"></ion-icon>\\r\\n  </ion-button>\\r\\n</ion-content>\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2luYXMvYWx0YS1jbGllbnRlL2FsdGEtY2xpZW50ZS5wYWdlLnNjc3MifQ== */\"","\r\nimport { Router } from '@angular/router';\r\nimport { AuthService } from './../../servicios/auth.service';\r\nimport { FirestorageService } from './../../servicios/firestorage.service';\r\nimport { Component } from '@angular/core';\r\nimport { BarcodeScannerOptions, BarcodeScanResult, BarcodeScanner } from '@ionic-native/barcode-scanner/ngx';\r\nimport { Camera, CameraOptions } from '@ionic-native/camera/ngx';\r\nimport { ToastService } from 'src/app/servicios/toast.service';\r\nimport { AlertService } from 'src/app/servicios/alert.service';\r\nimport { SpinerService } from 'src/app/servicios/spiner.service';\r\nimport { SpinnerService } from 'src/app/servicios/spinner.service';\r\n\r\n@Component({\r\n  selector: 'app-alta-cliente',\r\n  templateUrl: './alta-cliente.page.html',\r\n  styleUrls: ['./alta-cliente.page.scss'],\r\n})\r\nexport class AltaClientePage {\r\n  public nombreUsuario: string;\r\n  public apellidoUsuario: string;\r\n  public dniUsuario: string;\r\n  public correoUsuario: string;\r\n  public claveUsuario: string;\r\n  public dataFotoUsuario: string;\r\n  public urlFotoUsuario: string;\r\n  public nacionalidadUsuario: string;\r\n  public nacimientoUsuario: string;\r\n  public tipoRegistro: string;\r\n  public dataDNI: string[];\r\n  registros = [{ id: 0, tipo: 'Usuario' }, { id: 1, tipo: 'Anónimo' }];\r\n\r\n  constructor(private barcodeScanner: BarcodeScanner, private camera: Camera, private alert: AlertService,\r\n  private authService: AuthService, private firestorageService: FirestorageService, private router: Router,\r\n  private spinnerService: SpinnerService,\r\n  private toastService:ToastService) {\r\n    this.nombreUsuario = '';\r\n    this.apellidoUsuario = '';\r\n    this.dniUsuario = '';\r\n    this.correoUsuario = '';\r\n    this.claveUsuario = '';\r\n    this.dataFotoUsuario = '';\r\n    this.urlFotoUsuario = '';\r\n    this.nacionalidadUsuario = '';\r\n    this.nacimientoUsuario = '';\r\n    this.tipoRegistro = 'Usuario';\r\n  }\r\n\r\n  public tomarDatosDNI() {\r\n    const options: BarcodeScannerOptions = { prompt: 'Escanee el DNI', formats: 'PDF_417' };\r\n    this.barcodeScanner.scan(options).then((resultado: BarcodeScanResult) => {\r\n      this.dataDNI = (resultado.text).split('@');\r\n      this.dniUsuario = this.dataDNI[4].trim();\r\n      this.apellidoUsuario = this.dataDNI[1];\r\n      this.nombreUsuario = this.dataDNI[2];\r\n    });\r\n  }\r\n\r\n  public tomarFotoUsuario() {\r\n    const options: CameraOptions = {\r\n      quality: 50,\r\n      targetWidth: 500,\r\n      targetHeight: 500,\r\n      destinationType: this.camera.DestinationType.DATA_URL,\r\n      encodingType: this.camera.EncodingType.JPEG,\r\n      mediaType: this.camera.MediaType.ALLMEDIA,\r\n      sourceType: this.camera.PictureSourceType.CAMERA,\r\n      correctOrientation: true,\r\n      saveToPhotoAlbum: true\r\n    };\r\n\r\n    this.camera.getPicture(options).then((imageData) => {\r\n      this.dataFotoUsuario = imageData;\r\n      this.firestorageService.uploadFotoToFirebase(imageData).then(imageURL => {\r\n        this.urlFotoUsuario = imageURL;\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n  validarSoloLetras( valor, nombre ) {\r\n    if (valor === undefined || valor === '' || !/^[A-Za-z\\s\\xF1\\xD1]+$/.test(valor)) {\r\n      if ( nombre ) {\r\n        this.toastService.errorToast('Formato de nombre y/o apellido inválido');\r\n      }\r\n      else {\r\n        this.toastService.errorToast('Formato de sexo inválido');\r\n      }\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  validarEmail(valor) {\r\n    if (!/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/.test(valor)) {\r\n      this.toastService.errorToast('Formato de email inválido');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  validarDNI( dni: string ) {\r\n    if ( dni.length < 6 || dni.length > 8 ) {\r\n      this.toastService.errorToast('DNI: Cantidad de dígitos inválida');\r\n      return false;\r\n    }\r\n    else {\r\n      for ( const caracter of dni ) {\r\n        if ( isNaN( parseInt( caracter, 10 )) ) {\r\n          this.toastService.errorToast('Formato de dni inválido');\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  validarContraseña( clave, claveConfirmada ) {\r\n    if ( clave !== claveConfirmada ) {\r\n      this.toastService.errorToast('La contraseña no se confirmó correctamente');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n\r\n  public cargarUsuario() {\r\n    if ((this.tipoRegistro === 'Anónimo' && this.nombreUsuario === '') ||\r\n    this.tipoRegistro === 'Usuario' && (this.nombreUsuario === '' || this.apellidoUsuario === '' ||\r\n    this.dniUsuario === '' || this.correoUsuario === '' || this.claveUsuario === '')) {\r\n      this.alert.mensaje('', 'Debe completar todos los campos');\r\n      return;\r\n    }\r\n\r\n    if (this.tipoRegistro === 'Usuario' && this.claveUsuario.length < 6) {\r\n      this.alert.mensaje('', 'La clave debe tener al menos 6 caracteres');\r\n      return;\r\n    }\r\n\r\n    let emailRegex;\r\n    emailRegex = /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\r\n\r\n    if (this.tipoRegistro === 'Usuario' && !emailRegex.test(this.correoUsuario)) {\r\n      this.alert.mensaje('', 'Debe ingresar un e-mail válido');\r\n      return;\r\n    }\r\n\r\n  /*  if (this.urlFotoUsuario === '') {\r\n      this.alert.mensaje('', 'Debe cargar una foto');\r\n     return;\r\n    }*/\r\n\r\n    this.spinnerService.showSpinner();\r\n\r\n\r\n    if (this.tipoRegistro === 'Usuario') {\r\n      this.authService.CrearAuth(this.correoUsuario, this.claveUsuario, {\r\n        uid: '',\r\n        foto: this.urlFotoUsuario,\r\n        nombre: this.nombreUsuario,\r\n        apellido: this.apellidoUsuario,\r\n        mail: this.correoUsuario,\r\n        dni: this.dniUsuario,\r\n        activo: false,\r\n        estado: \"desconectado\",\r\n        perfil: 'cliente'\r\n      }, this.dataFotoUsuario).then(usuario => {\r\n        this.spinnerService.hideSpinner();\r\n\r\n        this.alert.mensaje('', 'Usuario registrado exitosamente! Va a poder ingresar a la aplicacion cuando sea aprobado por el dueño.');\r\n        this.router.navigate(['/log-in']);\r\n      }).catch(error => {\r\n        this.spinnerService.hideSpinner();\r\n\r\n        this.alert.mensaje('', 'ERROR: ' + error);\r\n      });\r\n    }\r\n    else {\r\n      this.authService.loginAnonimo({\r\n        foto: this.urlFotoUsuario,\r\n        nombre: this.nombreUsuario,\r\n        estado: \"desconectado\",\r\n        perfil: 'anonimo'\r\n      }, this.dataFotoUsuario).then(usuario => {\r\n        this.spinnerService.hideSpinner();\r\n        this.router.navigate(['/home-cliente']);\r\n        this.alert.mensaje('Bienvenido!', 'Ingresó como usuario anónimo');\r\n      }).catch(error => {\r\n        this.spinnerService.hideSpinner();\r\n        this.alert.mensaje('ERROR',  error);\r\n      });\r\n    }\r\n  }\r\n\r\n  salir(){\r\n    this.authService.LogOut();\r\n    this.router.navigate(['log-in']);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { LoadingController, ToastController } from '@ionic/angular';\r\nimport { LoadingOptions } from '@ionic/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SpinnerService {\r\n  // tslint:disable: variable-name\r\n  private _currentLoading: HTMLIonLoadingElement; // This is the spinner\r\n  private _isSpinnerShowing = false;\r\n  private _isGoingToClose = false;\r\n  private _timer = -1; // This is the timer, it will go from 2000 to -1\r\n  private _timerID = null;\r\n\r\n  constructor(\r\n    private _loadingController: LoadingController,\r\n    private _toastCtrl: ToastController\r\n  ) {\r\n    // console.log('Inicializo el spinner');\r\n    this.createSpinner();\r\n  }\r\n\r\n  private async createSpinner() {\r\n    this._currentLoading = await this._loadingController.create({\r\n        spinner: null,\r\n        keyboardClose: true,\r\n        message: '<div class=\"spinner-css\"><img src=\"assets/loading.png\"></div> Cargando...',\r\n        showBackdrop: false,\r\n        duration:30000,\r\n        cssClass: 'cajaSpinner'\r\n      });\r\n  }\r\n\r\n  public async showSpinner() {\r\n    // console.log('Muestro el spinner', this._currentLoading);\r\n    if (this._isSpinnerShowing === false) {\r\n      this._currentLoading.present();\r\n      this._isSpinnerShowing = this.startTimer();\r\n    }\r\n  }\r\n\r\n  private startTimer() {\r\n    // console.log('Inicializo el conteo');\r\n    this._timer = 2000;\r\n\r\n    this._timerID = setInterval(() => {\r\n      this._timer = this._timer - 1;\r\n\r\n      if (this._timer < 0) {\r\n        // console.log('El conteo se acabÃ³.');\r\n        this._isGoingToClose = true;\r\n        clearInterval(this._timerID);\r\n      }\r\n    }, 1);\r\n\r\n    return true;\r\n  }\r\n\r\n  public async hideSpinner() {\r\n    // console.log('Intento ocultar el spinner con el timer en', this._timer);\r\n\r\n    if (this._isSpinnerShowing) {\r\n      if (this._timer < 0) {\r\n        // console.log('El tiempo acabÃ³ y oculto el spinner');\r\n        this._isSpinnerShowing = this.stopAndReplaceSpinner();\r\n        this._isGoingToClose = false;\r\n      } else {\r\n        // console.log('El tiempo NO acaba y hago un timeout para acabarlo en', this._timer);\r\n        clearInterval(this._timerID);\r\n        setTimeout(() => {\r\n          this._isGoingToClose = true;\r\n          this.hideSpinner();\r\n        }, this._timer);\r\n      }\r\n\r\n      this._timer = -1;\r\n    }\r\n  }\r\n\r\n  private stopAndReplaceSpinner() {\r\n    this._currentLoading.dismiss();\r\n    this.createSpinner();\r\n    return false;\r\n  }\r\n\r\n  public mostrarToast(message, timer, color, position) {\r\n    this._toastCtrl.create({\r\n      color,\r\n      duration: timer * 1000,\r\n      message,\r\n      position,\r\n    })\r\n      .then((toast: HTMLIonToastElement) => {\r\n        toast.present();\r\n      });\r\n  }\r\n}\r\n"],"sourceRoot":""}