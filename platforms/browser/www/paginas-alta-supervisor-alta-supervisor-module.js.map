{"version":3,"sources":["webpack:///./src/app/paginas/alta-supervisor/alta-supervisor.module.ts","webpack:///./src/app/paginas/alta-supervisor/alta-supervisor.page.html","webpack:///./src/app/paginas/alta-supervisor/alta-supervisor.page.scss","webpack:///./src/app/paginas/alta-supervisor/alta-supervisor.page.ts"],"names":[],"mappings":"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","file":"paginas-alta-supervisor-alta-supervisor-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { AltaSupervisorPage } from './alta-supervisor.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AltaSupervisorPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [AltaSupervisorPage]\r\n})\r\nexport class AltaSupervisorPageModule {}\r\n","module.exports = \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-title color=\\\"danger\\\">Crear de dueño o supervisor</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ion-item>\\r\\n    <ion-label position=\\\"floating\\\">Nombre:</ion-label>\\r\\n    <ion-input type=\\\"text\\\" [(ngModel)]=\\\"empleado.nombre\\\"></ion-input>\\r\\n  </ion-item>\\r\\n  <ion-item>\\r\\n    <ion-label position=\\\"floating\\\">Apellido:</ion-label>\\r\\n    <ion-input type=\\\"text\\\" [(ngModel)]=\\\"empleado.apellido\\\"></ion-input>\\r\\n  </ion-item>\\r\\n  <ion-item>\\r\\n    <ion-label position=\\\"floating\\\">Correo:</ion-label>\\r\\n    <ion-input inputmode=\\\"email\\\" [(ngModel)]=\\\"empleado.mail\\\"></ion-input>\\r\\n  </ion-item>\\r\\n  <ion-item>\\r\\n    <ion-label position=\\\"floating\\\">Contraseña:</ion-label>\\r\\n    <ion-input type=\\\"password\\\" [(ngModel)]=\\\"password\\\"></ion-input>\\r\\n  </ion-item>\\r\\n  <ion-item>\\r\\n    <ion-label position=\\\"floating\\\">DNI:</ion-label>\\r\\n    <ion-input type=\\\"text\\\" [(ngModel)]=\\\"empleado.dni\\\"></ion-input>\\r\\n  </ion-item>\\r\\n  <ion-item>\\r\\n    <ion-label position=\\\"floating\\\">CUIL:</ion-label>\\r\\n    <ion-input type=\\\"text\\\" [(ngModel)]=\\\"empleado.cuil\\\"></ion-input>\\r\\n  </ion-item>\\r\\n  <ion-item>\\r\\n    <ion-label position=\\\"floating\\\">Perfil:</ion-label>\\r\\n    <ion-select [(ngModel)]=\\\"empleado.perfil\\\" placeholder=\\\"perfil\\\">\\r\\n      <ion-select-option value=\\\"dueño\\\">Dueño</ion-select-option>\\r\\n      <ion-select-option value=\\\"supervisor\\\" selected>Supervisor</ion-select-option>\\r\\n    </ion-select>\\r\\n  </ion-item>\\r\\n  <ion-item>\\r\\n    <ion-label>Foto: </ion-label>\\r\\n    <ion-label *ngIf=\\\"empleado.foto == ''\\\">Sin subir</ion-label>\\r\\n    <ion-label *ngIf=\\\"empleado.foto != ''\\\">Subida</ion-label>\\r\\n    <ion-thumbnail  *ngIf=\\\"empleado.foto != ''\\\">\\r\\n      <ion-img [src]=\\\"empleado.foto\\\"></ion-img>\\r\\n    </ion-thumbnail>\\r\\n  </ion-item>\\r\\n\\r\\n  <br>\\r\\n  <h3 *ngIf=\\\"faltan\\\" class=\\\"error\\\">Faltan datos en el registro!</h3>\\r\\n  <h3 *ngIf=\\\"faltaFoto\\\" class=\\\"error\\\">Falta subir foto de usuario!</h3>\\r\\n  <h3 *ngIf=\\\"emailmal\\\" class=\\\"error\\\">Ingrese correo válido!</h3>\\r\\n  <br>\\r\\n\\r\\n  <!-- <ion-button (click)=\\\"LeerQR()\\\" color=\\\"danger\\\" expand=\\\"block\\\">\\r\\n    Cargar con QR del DNI\\r\\n  </ion-button> -->\\r\\n  <ion-button (click)=\\\"SacarFoto()\\\" color=\\\"danger\\\" expand=\\\"block\\\">\\r\\n    Sacar foto\\r\\n  </ion-button>\\r\\n  <ion-button (click)=\\\"Ingresar()\\\" color=\\\"danger\\\" expand=\\\"block\\\">\\r\\n    Guardar Usuario\\r\\n  </ion-button>\\r\\n  <ion-button class=\\\"apagar\\\" color=\\\"dark\\\" (click)=\\\"salir()\\\">\\r\\n    <ion-icon name=\\\"power\\\"></ion-icon>\\r\\n  </ion-button>\\r\\n</ion-content>\\r\\n\"","module.exports = \".error {\\n  text-align: center;\\n  color: red; }\\n\\n.foto-preview {\\n  width: 100px;\\n  height: 100px;\\n  text-align: center; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnaW5hcy9hbHRhLXN1cGVydmlzb3IvRTpcXERlc2Nhcmdhc1xcbWFzdGVyMTExMVxcbWFzdGVyMTExMS9zcmNcXGFwcFxccGFnaW5hc1xcYWx0YS1zdXBlcnZpc29yXFxhbHRhLXN1cGVydmlzb3IucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksa0JBQWtCO0VBQ2xCLFVBQVUsRUFBQTs7QUFFZDtFQUNJLFlBQVk7RUFDWixhQUFhO0VBQ2Isa0JBQWtCLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9wYWdpbmFzL2FsdGEtc3VwZXJ2aXNvci9hbHRhLXN1cGVydmlzb3IucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmVycm9yIHtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIGNvbG9yOiByZWQ7XHJcbn1cclxuLmZvdG8tcHJldmlldyB7XHJcbiAgICB3aWR0aDogMTAwcHg7XHJcbiAgICBoZWlnaHQ6IDEwMHB4O1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59Il19 */\"","import { Component, OnInit } from '@angular/core';\r\nimport { CameraOptions } from '@ionic-native/camera';\r\nimport { Camera } from '@ionic-native/camera/ngx';\r\nimport { FirestorageService } from 'src/app/servicios/firestorage.service';\r\nimport { ErrorService } from 'src/app/servicios/error.service';\r\nimport { Empleado } from 'src/app/interfaces/usuario';\r\nimport { AuthService } from 'src/app/servicios/auth.service';\r\nimport { Router } from '@angular/router';\r\nimport { BarcodeScanner } from '@ionic-native/barcode-scanner/ngx';\r\nimport { AlertService } from 'src/app/servicios/alert.service';\r\n\r\n@Component({\r\n  selector: 'app-alta-supervisor',\r\n  templateUrl: './alta-supervisor.page.html',\r\n  styleUrls: ['./alta-supervisor.page.scss'],\r\n})\r\nexport class AltaSupervisorPage implements OnInit {\r\n  public faltan: boolean;\r\n  public empleado: Empleado;\r\n  public password = '';\r\n  public emailmal: boolean;\r\n  private imageData: string;\r\n  public faltaFoto: boolean;\r\n\r\n  constructor(private camera: Camera, private fotosService: FirestorageService,\r\n    private errorHand: ErrorService, private authService: AuthService,\r\n    private router: Router, private barcodeScanner: BarcodeScanner, \r\n    private alertServ: AlertService) {\r\n      this.empleado = {\r\n        uid: '',\r\n        nombre: '',\r\n        apellido: '',\r\n        dni: '',\r\n        cuil: '',\r\n        mail: '',\r\n        perfil: '',\r\n        foto: '',\r\n        activo: true\r\n      };\r\n      this.password = '';\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  public Ingresar() {\r\n    this.faltan = false;\r\n    this.emailmal = false;\r\n    this.faltaFoto = false;\r\n    if (this.empleado.nombre !== '' && this.empleado.apellido !== '' &&\r\n    this.empleado.dni !== '' && this.empleado.cuil !== '' && this.empleado.perfil !== ''\r\n    && this.empleado.mail !== ''  && this.password !== '') {\r\n      const emailRegex = /^[-\\w.%+]{1,64}@(?:[A-Z0-9-]{1,63}\\.){1,125}[A-Z]{2,63}$/i;\r\n      if (emailRegex.test(this.empleado.mail)) {\r\n        if (this.empleado.foto !== '') {\r\n          this.authService.CrearAuth(this.empleado.mail, this.password, this.empleado, this.imageData).then( () => {\r\n            this.alertServ.mensaje('', 'Se agregó correctamente');\r\n            this.router.navigate(['/home']);\r\n          });\r\n        } else {\r\n          this.faltaFoto = true;\r\n        }\r\n      } else {\r\n        this.emailmal = true;\r\n      }\r\n    } else {\r\n      this.faltan = true;\r\n    }\r\n  }\r\n  \r\n  public SacarFoto() {\r\n    const camOptions: CameraOptions = {\r\n      quality: 50,\r\n      targetWidth: 500,\r\n      targetHeight: 500,\r\n      destinationType: this.camera.DestinationType.DATA_URL,\r\n      encodingType: this.camera.EncodingType.JPEG,\r\n      mediaType: this.camera.MediaType.ALLMEDIA,\r\n      sourceType: this.camera.PictureSourceType.CAMERA,\r\n      correctOrientation: true,\r\n      saveToPhotoAlbum: true\r\n    };\r\n    this.camera.getPicture(camOptions).then( (pictureAux) => {\r\n      this.imageData = pictureAux;\r\n      this.fotosService.uploadFotoToFirebase(pictureAux).then( (imageURL) => {\r\n        this.empleado.foto = imageURL;\r\n      });\r\n    }, error => {\r\n      if (error === 'No Image Selected') {\r\n        this.errorHand.MostrarErrorSoloLower('No se sacó imágen');\r\n      } else {\r\n        this.errorHand.MostrarErrorSoloLower('Error al sacar foto ' + error);\r\n      }\r\n      console.log(error);\r\n    }).catch(err => {\r\n      console.log(err);\r\n    });\r\n  }\r\n  \r\n  public LeerQR() {\r\n    this.barcodeScanner.scan().then(barcodeData => {\r\n      // alert(barcodeData.text);\r\n      try {\r\n        const datos = barcodeData.text.split('@');\r\n        this.empleado.cuil = datos[0];\r\n        this.empleado.apellido = datos[1];\r\n        this.empleado.nombre = datos[2];\r\n        this.empleado.dni = datos[4];\r\n      } catch (err) {\r\n        this.errorHand.MostrarErrorSoloLower('Error: ' + err);\r\n      }\r\n     }).catch(err => {\r\n        this.errorHand.MostrarErrorSoloLower('Error: ' + err);\r\n        console.log('Error', err);\r\n     });\r\n  }\r\n\r\n  salir(){\r\n    this.authService.LogOut();\r\n    this.router.navigate(['log-in']);\r\n  }\r\n}\r\n"],"sourceRoot":""}