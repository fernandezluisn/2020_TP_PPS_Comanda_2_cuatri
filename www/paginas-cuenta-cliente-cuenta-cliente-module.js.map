{"version":3,"sources":["webpack:///./src/app/paginas/cuenta-cliente/cuenta-cliente.module.ts","webpack:///./src/app/paginas/cuenta-cliente/cuenta-cliente.page.html","webpack:///./src/app/paginas/cuenta-cliente/cuenta-cliente.page.scss","webpack:///./src/app/paginas/cuenta-cliente/cuenta-cliente.page.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAyC;AACM;AACF;AACU;AAEV;AAEa;AAE1D,IAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,sEAAiB;KAC7B;CACF,CAAC;AAWF;IAAA;IAAsC,CAAC;IAA1B,uBAAuB;QATnC,8DAAQ,CAAC;YACR,OAAO,EAAE;gBACP,4DAAY;gBACZ,0DAAW;gBACX,0DAAW;gBACX,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;aAC9B;YACD,YAAY,EAAE,CAAC,sEAAiB,CAAC;SAClC,CAAC;OACW,uBAAuB,CAAG;IAAD,8BAAC;CAAA;AAAH;;;;;;;;;;;;ACzBpC,8GAA8G,+HAA+H,oBAAoB,iBAAiB,yHAAyH,qBAAqB,sEAAsE,oBAAoB,wLAAwL,YAAY,2BAA2B,aAAa,qVAAqV,yCAAyC,OAAO,2PAA2P,iBAAiB,4dAA4d,YAAY,iO;;;;;;;;;;;ACA/1D,+DAA+D,uK;;;;;;;;;;;;;;;;;;;;;;;ACAb;AACiB;AACJ;AAGtB;AAC0B;AACN;AACe;AAO5E;IAEE,2BAAoB,MAAc,EAAU,aAA4B,EAAU,YAA0B,EAAU,cAA8B,EAC1I,cAA0B,EAAU,kBAAsC;QADhE,WAAM,GAAN,MAAM,CAAQ;QAAU,kBAAa,GAAb,aAAa,CAAe;QAAU,iBAAY,GAAZ,YAAY,CAAc;QAAU,mBAAc,GAAd,cAAc,CAAgB;QAC1I,mBAAc,GAAd,cAAc,CAAY;QAAU,uBAAkB,GAAlB,kBAAkB,CAAoB;QAElF,YAAO,GAAG,EAAE,CAAC;QAIb,uBAAuB;QACvB,UAAK,GAAG,GAAG,CAAC;IAP0E,CAAC;IASzF,oCAAQ,GAAR;QAAA,iBAkDD;QAhDG,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC;QAC3D,IAAG,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,EAAC;YACrB,OAAO,CAAC,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC;YACpC,IAAI,CAAC,OAAO,GAAI,CAAC,CAAC;SACnB;QAED,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,UAAC,IAAQ;YACtE,IAAI,CAAC,OAAO,CAAC,cAAI;gBACf,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBACzB,IAAI,EAAE,GAAG,KAAI,CAAC,OAAO,CAAC,EAAE,CAAC;gBACvB,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC;gBACpB,KAAI,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC;gBAErB,KAAI,CAAC,aAAa,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,UAAC,OAAO;oBAChD,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;oBACrB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC;oBAEjB,6DAA6D;oBAC7D,OAAO,CAAC,OAAO,CAAC,gBAAM;wBACZ,IAAG,MAAM,CAAC,KAAK,IAAG,IAAI,CAAC,IAAI;4BAC3B,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;oBACzB,CAAC,CAAC,CAAC;gBACd,CAAC,CAAC,CAAC;gBAEH,KAAI,CAAC,kBAAkB,CAAC,oBAAoB,EAAE,CAAC,SAAS,CAAC,UAAC,KAAK;oBAE7D,KAAK,CAAC,OAAO,CAAC,cAAI;wBACR,IAAG,IAAI,CAAC,SAAS,IAAG,IAAI,CAAC,EAAE,IAAK,IAAI,CAAC,OAAO,IAAI,KAAK,EACrD;4BACA,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;4BAC5B,IAAG,KAAI,CAAC,OAAO,IAAI,SAAS;gCAC5B,KAAI,CAAC,OAAO,GAAG,CAAC,CAAC;4BACjB,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC;4BACtB,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;4BAExB,IAAG,KAAI,CAAC,OAAO,IAAI,CAAC;gCACpB,KAAI,CAAC,eAAe,GAAI,KAAI,CAAC,KAAK,GAAG,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;;gCAEpD,KAAI,CAAC,eAAe,GAAI,KAAI,CAAC,KAAK,CAAC;yBACpC;oBACE,CAAC,CAAC,CAAC;gBACd,CAAC,CAAC,CAAC;YAKX,CAAC,CAAC,CAAC;QACP,CAAC,CAAC;IACJ,CAAC;IAGD,sCAAU,GAAV;QAEE,IAAG,YAAY,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,MAAM,EAC3C;YACE,IAAI,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;YACxB,KAAK,CAAC,GAAG,GAAG,qBAAqB,CAAC;YAClC,KAAK,CAAC,IAAI,EAAE,CAAC;YACb,KAAK,CAAC,IAAI,EAAE,CAAC;SACd;QAEC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,UAAU,GAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;IAClD,CAAC;IAGD,iCAAK,GAAL;QACE,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,cAAc,CAAC;QACrC,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAEnD,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,wBAAwB,CAAC;QACnD,IAAI,CAAC,WAAW,CAAC,IAAI,GAAG,IAAI,CAAC,eAAe,CAAC;QAC7C,IAAI,CAAC,kBAAkB,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACzD,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;IACnC,CAAC;IAvFU,iBAAiB;QAL7B,+DAAS,CAAC;YACT,QAAQ,EAAE,oBAAoB;YAC9B,4HAAyC;;SAE1C,CAAC;+EAG4B,sDAAM,EAAwB,gFAAc,EAAwB,4EAAY,EAA0B,gFAAc;YAC3H,0EAAW,EAA8B,yFAAkB;OAHzE,iBAAiB,CA0F7B;IAAD,wBAAC;CAAA;AA1F6B","file":"paginas-cuenta-cliente-cuenta-cliente-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CuentaClientePage } from './cuenta-cliente.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CuentaClientePage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [CuentaClientePage]\n})\nexport class CuentaClientePageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-title  style=\\\"text-align: center;\\\">Cuenta</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <br>\\n  <ion-card style=\\\"border: 2px solid #A599B5; text-align: center; font-size: 18px;\\\" *ngIf=\\\"id != ''\\\">\\n    <br><br>\\n    <ion-card *ngIf=\\\"this.pedidos.length> 0\\\" style=\\\"background-color:whitesmoke; border-radius: 20px;\\\">\\n      <ion-card-content>\\n\\n\\n        <table style=\\\"width: 100%; text-align: center;\\\">\\n          <thead>\\n            <th>Productos</th><th>Precio</th>\\n          </thead>\\n          <tbody>\\n            <tr *ngFor=\\\"let item of this.pedidos\\\">\\n              <td>{{item.email}}</td>\\n              <td>{{item.precio}}</td>\\n            </tr>\\n          </tbody>\\n        </table>\\n      </ion-card-content>\\n    </ion-card>\\n\\n\\n\\n    <br>\\n\\n    <ion-item *ngIf=\\\"descPorcentaje\\\">\\n      <h5>Descuento por juego: 10%</h5>\\n    </ion-item>\\n    <br> \\n    <ng-container *ngIf=\\\"!esMozo\\\">\\n      <ng-container>\\n        <ion-item style=\\\"text-align: center;\\\">\\n          <h1>Total sin propina: ${{total}}</h1>\\n        </ion-item>\\n        <ion-button *ngIf=\\\"!delivery\\\" (click)=\\\"darPropina()\\\" color=\\\"success\\\">Dar Propina</ion-button>\\n      </ng-container>\\n      <br>\\n      <ion-item  *ngIf=\\\"!delivery\\\">\\n        <h1>Total final más propina: ${{TotalMasPropina}}</h1>\\n      </ion-item>\\n      <br>\\n      <ng-container *ngIf=\\\"!delivery\\\">\\n        <ion-button (click)=\\\"Pagar()\\\" color=\\\"success\\\" expand=\\\"success\\\">Pagar</ion-button>\\n      </ng-container>\\n    </ng-container>\\n\\n    <ng-container *ngIf=\\\"esMozo && !delivery\\\">\\n      <ion-item *ngIf=\\\"propina == 0 && total != 0\\\">\\n        <h2>Falta ingresar la propina!</h2>\\n      </ion-item>\\n      <ng-container>\\n        <ion-item>\\n          <h1>Total final más propina: ${{TotalFinal}}</h1>\\n        </ion-item>\\n        <br>\\n        <ion-button color=\\\"success\\\" expand=\\\"full\\\" (click)=\\\"Pagar()\\\">Guardar Pago</ion-button>\\n      </ng-container>  \\n    </ng-container>    \\n  </ion-card>\\n</ion-content>\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2luYXMvY3VlbnRhLWNsaWVudGUvY3VlbnRhLWNsaWVudGUucGFnZS5zY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\nimport { SpinnerService } from 'src/app/servicios/spinner.service';\nimport { AlertService } from 'src/app/servicios/alert.service';\nimport { Pedido } from 'src/app/interfaces/pedido';\nimport { MesaCliente } from './../../interfaces/mesa-cliente';\nimport { Router } from '@angular/router';\nimport { PedidosService } from 'src/app/servicios/pedidos.service';\nimport { AuthService } from 'src/app/servicios/auth.service';\nimport { MesaClienteService } from 'src/app/servicios/mesa-cliente.service';\n\n@Component({\n  selector: 'app-cuenta-cliente',\n  templateUrl: './cuenta-cliente.page.html',\n  styleUrls: ['./cuenta-cliente.page.scss'],\n})\nexport class CuentaClientePage implements OnInit {\n\n  constructor(private router: Router, private pedidoService:PedidosService, private alertService: AlertService, private spinnerService: SpinnerService,\n    private clienteService:AuthService, private mesaClienteService: MesaClienteService) { }\n    private   cliente;\n    pedidos = [];\n    private   propina;\n    idMesa;\n    mesaCliente;\n    //TODO calcular total..\n    total = 100;\n    TotalMasPropina;\n  ngOnInit() {\n\n    this.cliente = JSON.parse(localStorage.getItem('usuario')); \n    if(isNaN(this.propina)){\n      console.log(\"es nan\" + this.propina)\n      this.propina  = 0;\n    }\n\n    this.clienteService.obtenerCliente(this.cliente.uid).subscribe((resp:any) =>{\n      resp.forEach(user => {\n        console.log(user.estado);\n        var id = this.cliente.id;\n          this.cliente = user;      \n          this.cliente.id = id;\n\n          this.pedidoService.getPedidos().subscribe((pedidos) => {\n            console.log(pedidos);\n            console.log(user)\n\n            //TODO-> Confirmar que el pedido es el actual bajo su estado.\n            pedidos.forEach(pedido => {\n                      if(pedido.email ==user.mail )\n                      this.pedidos.push(pedido);\n                       });\n            });   \n\n            this.mesaClienteService.devolverListadoMesas().subscribe((mesas) => {\n  \n              mesas.forEach(mesa => {\n                        if(mesa.idCliente ==user.id  && mesa.cerrada == false)\n                        {\n                        this.propina = mesa.propina;\n                        if(this.propina == undefined)\n                        this.propina = 0;\n                        this.idMesa = mesa.id;\n                        this.mesaCliente = mesa;\n\n                        if(this.propina != 0)\n                        this.TotalMasPropina =  this.total * (this.propina);\n                        else\n                        this.TotalMasPropina =  this.total;\n                      }\n                         });\n              });   \n  \n\n\n      \n      });        \n  })\n}\n\n\ndarPropina()\n{\n  if(localStorage.getItem('Sonido') == 'true')\n  {\n    let audio = new Audio();\n    audio.src = '../assets/click.m4a';\n    audio.load();\n    audio.play();\n  }\n\n    this.router.navigate(['propina/'+ this.idMesa]);\n  }\n\n\n  Pagar(){\n    this.cliente.estado = \"desconectado\";\n    this.clienteService.ModificarUsuario(this.cliente);\n  \n    this.mesaCliente.estado = \"PendienteConfirmarPago\";\n    this.mesaCliente.pago = this.TotalMasPropina;\n    this.mesaClienteService.actualizarMesa(this.mesaCliente);\n    this.router.navigate(['log-in']);\n  }\n\n\n}\n"],"sourceRoot":""}