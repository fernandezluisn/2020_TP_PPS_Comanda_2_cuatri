{"version":3,"sources":["webpack:///./src/app/paginas/cuenta-cliente/cuenta-cliente.module.ts","webpack:///./src/app/paginas/cuenta-cliente/cuenta-cliente.page.html","webpack:///./src/app/paginas/cuenta-cliente/cuenta-cliente.page.scss","webpack:///./src/app/paginas/cuenta-cliente/cuenta-cliente.page.ts"],"names":[],"mappings":"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","file":"paginas-cuenta-cliente-cuenta-cliente-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { CuentaClientePage } from './cuenta-cliente.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: CuentaClientePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [CuentaClientePage]\r\n})\r\nexport class CuentaClientePageModule {}\r\n","module.exports = \"<ion-header>\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-title  style=\\\"text-align: center;\\\">Cuenta</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <br>\\r\\n  <ion-card style=\\\"border: 2px solid #A599B5; text-align: center; font-size: 18px;\\\" *ngIf=\\\"id != ''\\\">\\r\\n    <br><br>\\r\\n    <ion-card *ngIf=\\\"this.pedidos.length> 0\\\" style=\\\"background-color:whitesmoke; border-radius: 20px;\\\">\\r\\n      <ion-card-content>\\r\\n\\r\\n\\r\\n        <table style=\\\"width: 100%; text-align: center;\\\">\\r\\n          <thead>\\r\\n            <th>Productos</th><th>Precio</th><th>Cantidad Unitaria</th>\\r\\n          </thead>\\r\\n          <tbody>\\r\\n            <tr>\\r\\n            <td>Hamburguesa</td>\\r\\n            <td>500</td>\\r\\n            <td>4</td>\\r\\n          </tr>\\r\\n          <tr>\\r\\n            <td>Vodka</td>\\r\\n            <td>100</td>\\r\\n            <td>5</td>\\r\\n          </tr>\\r\\n\\r\\n          </tbody>\\r\\n        </table>\\r\\n      </ion-card-content>\\r\\n    </ion-card>\\r\\n\\r\\n\\r\\n\\r\\n    <br>\\r\\n\\r\\n    <ion-item *ngIf=\\\"descPorcentaje\\\">\\r\\n      <h5>Descuento por juego: 10%</h5>\\r\\n    </ion-item>\\r\\n    <br> \\r\\n    <ng-container *ngIf=\\\"!esMozo\\\">\\r\\n      <ng-container>\\r\\n        <ion-item style=\\\"text-align: center;\\\">\\r\\n          <h1>Total sin propina: ${{total}}</h1>\\r\\n        </ion-item>\\r\\n        <ion-button *ngIf=\\\"!delivery\\\" (click)=\\\"darPropina()\\\" color=\\\"success\\\">Dar Propina</ion-button>\\r\\n      </ng-container>\\r\\n\\r\\n        <ion-item style=\\\"text-align: center;\\\">\\r\\n          <h1>Descuentos: ${{descuentos}}</h1>\\r\\n        </ion-item>\\r\\n      \\r\\n      <br>\\r\\n      <ion-item  *ngIf=\\\"!delivery\\\">\\r\\n        <h1>Total final: ${{TotalMasPropina}}</h1>\\r\\n      </ion-item>\\r\\n      <br>\\r\\n      <ng-container *ngIf=\\\"!delivery\\\">\\r\\n        <ion-button (click)=\\\"Pagar()\\\" color=\\\"success\\\" expand=\\\"success\\\">Pagar</ion-button>\\r\\n      </ng-container>\\r\\n    </ng-container>\\r\\n\\r\\n    <ng-container *ngIf=\\\"esMozo && !delivery\\\">\\r\\n      <ion-item *ngIf=\\\"propina == 0 && total != 0\\\">\\r\\n        <h2>Falta ingresar la propina!</h2>\\r\\n      </ion-item>\\r\\n      <ng-container>\\r\\n        <ion-item>\\r\\n          <h1>Total final(propina y descuentos): ${{TotalMasPropina}}</h1>\\r\\n        </ion-item>\\r\\n        <br>\\r\\n        <ion-button color=\\\"success\\\" expand=\\\"full\\\" (click)=\\\"Pagar()\\\">Guardar Pago</ion-button>\\r\\n      </ng-container>  \\r\\n    </ng-container>    \\r\\n  </ion-card>\\r\\n</ion-content>\\r\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2luYXMvY3VlbnRhLWNsaWVudGUvY3VlbnRhLWNsaWVudGUucGFnZS5zY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\r\nimport { SpinnerService } from 'src/app/servicios/spinner.service';\r\nimport { AlertService } from 'src/app/servicios/alert.service';\r\nimport { Pedido } from 'src/app/interfaces/pedido';\r\nimport { MesaCliente } from './../../interfaces/mesa-cliente';\r\nimport { Router } from '@angular/router';\r\nimport { PedidosService } from 'src/app/servicios/pedidos.service';\r\nimport { AuthService } from 'src/app/servicios/auth.service';\r\nimport { MesaClienteService } from 'src/app/servicios/mesa-cliente.service';\r\n\r\n@Component({\r\n  selector: 'app-cuenta-cliente',\r\n  templateUrl: './cuenta-cliente.page.html',\r\n  styleUrls: ['./cuenta-cliente.page.scss'],\r\n})\r\nexport class CuentaClientePage implements OnInit {\r\n\r\n  constructor(private router: Router, private pedidoService:PedidosService, private alertService: AlertService, private spinnerService: SpinnerService,\r\n    private clienteService:AuthService, private mesaClienteService: MesaClienteService) { }\r\n    private   cliente;\r\n    pedidos = [];\r\n    private   propina;\r\n    idMesa;\r\n    mesaCliente;\r\n    descuentos;\r\n    //TODO calcular total..\r\n    total = 2500;\r\n    TotalMasPropina;\r\n  ngOnInit() {\r\n\r\n    this.cliente = JSON.parse(localStorage.getItem('usuario')); \r\n    if(isNaN(this.propina)){\r\n      console.log(\"es nan\" + this.propina)\r\n      this.propina  = 0;\r\n    }\r\nthis.descuentos = 0;\r\n\r\n    this.clienteService.obtenerCliente(this.cliente.uid).subscribe((resp:any) =>{\r\n      resp.forEach(user => {\r\n        console.log(user.estado);\r\n        var id = this.cliente.id;\r\n          this.cliente = user;      \r\n          this.cliente.id = id;\r\n\r\n          this.pedidoService.getPedidos().subscribe((pedidos) => {\r\n            console.log(pedidos);\r\n            console.log(user)\r\n\r\n            //TODO-> Confirmar que el pedido es el actual bajo su estado.\r\n            pedidos.forEach(pedido => {\r\n                      if(pedido.email ==user.mail )\r\n                      this.pedidos.push(pedido);\r\n                       });\r\n            });   \r\n\r\n            this.mesaClienteService.devolverListadoMesas().subscribe((mesas) => {\r\n  \r\n              mesas.forEach(mesa => {\r\n                        if(mesa.idCliente ==user.id  && mesa.cerrada == false)\r\n                        {\r\n                        this.propina = mesa.propina;\r\n                        this.idMesa = mesa.id;\r\n                        this.mesaCliente = mesa;\r\n\r\n                        if(this.propina == undefined)\r\n                        this.propina = 0;\r\n\r\n\r\n                 \r\n                      \r\n                        this.descuentos = mesa.juegoDescuento\r\n                        if(this.descuentos == undefined)\r\n                        this.descuentos = 0;\r\n\r\n                        if(this.propina != 0)\r\n                        this.TotalMasPropina =  this.total * (this.propina);\r\n                        else\r\n                        this.TotalMasPropina =  this.total;\r\n\r\n                        if(this.mesaCliente.juegoDescuento != undefined)\r\n                          this.TotalMasPropina = this.TotalMasPropina - this.descuentos;\r\n                        \r\n                      }\r\n                         });\r\n              });   \r\n  \r\n\r\n\r\n      \r\n      });        \r\n  })\r\n\r\n}\r\n\r\n\r\ndarPropina()\r\n{\r\n  if(localStorage.getItem('Sonido') == 'true')\r\n  {\r\n    let audio = new Audio();\r\n    audio.src = '../assets/click.m4a';\r\n    audio.load();\r\n    audio.play();\r\n  }\r\n\r\n    this.router.navigate(['propina/'+ this.idMesa]);\r\n  }\r\n\r\n\r\n  Pagar(){\r\n    this.cliente.estado = \"desconectado\";\r\n    this.clienteService.ModificarUsuario(this.cliente);\r\n  \r\n    this.mesaCliente.estado = \"PendienteConfirmarPago\";\r\n    this.mesaCliente.pago = this.TotalMasPropina;\r\n    this.mesaClienteService.actualizarMesa(this.mesaCliente);\r\n    this.router.navigate(['log-in']);\r\n  }\r\n\r\n\r\n}\r\n"],"sourceRoot":""}