{"version":3,"sources":["webpack:///./src/app/paginas/aceptar-pedido/aceptar-pedido.module.ts","webpack:///./src/app/paginas/aceptar-pedido/aceptar-pedido.page.html","webpack:///./src/app/paginas/aceptar-pedido/aceptar-pedido.page.scss","webpack:///./src/app/paginas/aceptar-pedido/aceptar-pedido.page.ts"],"names":[],"mappings":"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","file":"paginas-aceptar-pedido-aceptar-pedido-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { AceptarPedidoPage } from './aceptar-pedido.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AceptarPedidoPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [AceptarPedidoPage]\r\n})\r\nexport class AceptarPedidoPageModule {}\r\n","module.exports = \"<ion-header>\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-title>Confirmar Pedidos</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ng-container *ngFor=\\\"let pedido of this.pedidos\\\">\\r\\n    <ion-item lines=\\\"full\\\" *ngIf=\\\"pedido.estado == 'sconfirmar'\\\">\\r\\n      <ion-grid>\\r\\n      <ion-row>\\r\\n        <ion-col size=\\\"6\\\">\\r\\n         <b>Pedido de </b>\\r\\n          <b>Cliente</b>: {{this.pedido.email}} en Mesa <b>{{this.pedido.Mesa}}</b><br>\\r\\n  \\r\\n        </ion-col>\\r\\n        <ion-col size=\\\"6\\\">\\r\\n          <ion-button (click)=\\\"this.confirmarPedido(pedido)\\\" expand=\\\"full\\\" >Confirmar</ion-button>\\r\\n          <ion-button (click)=\\\"this.rechazarReserva(this.reserva)\\\" expand=\\\"full\\\" color=\\\"danger\\\" >Rechazar</ion-button>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      </ion-grid>\\r\\n    </ion-item>\\r\\n  </ng-container>\\r\\n</ion-content>\\r\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2luYXMvYWNlcHRhci1wZWRpZG8vYWNlcHRhci1wZWRpZG8ucGFnZS5zY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { PedidosService } from 'src/app/servicios/pedidos.service';\r\nimport { FcmService } from 'src/app/servicios/fcm.service';\r\nimport { SpinnerService } from 'src/app/servicios/spinner.service';\r\nimport { AlertService } from 'src/app/servicios/alert.service';\r\nimport { MesasService } from 'src/app/servicios/mesas.service';\r\n\r\n@Component({\r\n  selector: 'app-aceptar-pedido',\r\n  templateUrl: './aceptar-pedido.page.html',\r\n  styleUrls: ['./aceptar-pedido.page.scss'],\r\n})\r\nexport class AceptarPedidoPage implements OnInit {\r\n\r\n  constructor(private fcmService: FcmService, private router: Router, private pedidoService: PedidosService, \r\n    private spinnerService: SpinnerService, private alertService: AlertService, private mesaService: MesasService) { }\r\n\r\n    pedidos;\r\n    mesas;\r\n    pedidosProducto;\r\n\r\n  ngOnInit() {\r\n    \r\n\r\n    this.mesaService.getMesas().subscribe(mesas => { this.mesas = mesas; \r\n    })\r\n\r\n    this.pedidoService.getPedidosProductos().subscribe(pedidosProducto => { this.pedidosProducto = pedidosProducto; \r\n    })\r\n\r\n\r\n\r\n    this.pedidoService.getPedidos().subscribe(pedidos => { this.pedidos = pedidos; \r\n     console.log(this.pedidos);\r\n        pedidos.forEach(pedido => {\r\n           this.pedidoService.getPedidosProductosPorPedido(pedido.id).then(pedidosProducto => {\r\n             console.log(pedidosProducto);\r\n             pedido.productos = pedidosProducto;\r\n             })\r\n          })\r\n     \r\n      });\r\n  }\r\n\r\n  confirmarPedido(pedido){\r\n   \r\n    pedido.estado = \"confirmado\";\r\nvar flagcomida = 0;\r\nvar flagbebida = 0;\r\n    this.pedidoService.updatePedido(pedido.id, pedido);\r\n\r\n\r\n    //TODO -> SEND FCM POR TIPO DE PEDIDO PRODUCTO.\r\n    this.pedidoService.getPedidosProductosPorPedido(pedido.id).then(pedidosProducto => {\r\n      pedidosProducto.forEach(pedidoProducto => {\r\n         pedidoProducto.estado = \"confirmado\";\r\n         if(pedidoProducto.tipoProducto == \"comida\")\r\n         flagcomida == 1;\r\n\r\n         if(pedidoProducto.tipoProducto == \"comida\")\r\n         flagbebida == 1;\r\n\r\n         this.pedidoService.updatePedidoProducto(pedidoProducto.id, pedidoProducto)\r\n         });\r\n      })\r\n\r\n      if(flagbebida == 1)\r\n      this.fcmService.enviarMensaje(\"Nuevo Producto Pendiente\", \"nueva bebida a preparar\", \"notificacionBar\")\r\n\r\n      if(flagcomida == 1)\r\n      this.fcmService.enviarMensaje(\"Nuevo Producto Pendiente\", \"nueva comida a preparar\", \"notificacionCocina\")\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n"],"sourceRoot":""}